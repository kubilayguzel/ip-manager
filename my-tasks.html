<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IP Manager - İşlerim</title>
    <style>
        /* CSS stilleri öncekiyle aynı, değişiklik yok */
    </style>
</head>
<body>
    <script type="module">
        import { authService, taskService, ipRecordsService, personsService, auth, generateUUID } from './firebase-config.js';

        class MyTasksModule {
            constructor() {
                // ... özellikler ...
            }

            async init() {
                this.currentUser = authService.getCurrentUser();
                if (!this.currentUser) {
                    window.location.href = 'index.html';
                    return;
                }
                
                this.updateUserInfo();
                this.setupEventListeners();
                await this.loadInitialData();
            }

            updateUserInfo() {
                if (this.currentUser) {
                    const userName = this.currentUser.displayName || this.currentUser.email.split('@')[0] || 'Kullanıcı';
                    const userRole = this.currentUser.role === 'admin' ? 'Yönetici' : this.currentUser.role === 'superadmin' ? 'Süper Yönetici' : 'Kullanıcı';
                    document.getElementById('userAvatar').textContent = userName.charAt(0).toUpperCase();
                    document.getElementById('userName').textContent = userName;
                    document.getElementById('userRole').textContent = userRole;
                }
            }
            
            async loadInitialData() {
                // ... veri yükleme ...
                this.renderTasks();
            }

            setupEventListeners() {
                // ... olay dinleyicileri ...
            }

            renderTasks(filter = 'all') {
                // ... görevleri render etme ...
            }

            // ... diğer tüm metodlar ...
        }

        document.addEventListener('DOMContentLoaded', () => {
            let myTasksModuleInstance;
            authService.auth.onAuthStateChanged(async (user) => {
                if (user || authService.getCurrentUser()) {
                    if (!myTasksModuleInstance) {
                        myTasksModuleInstance = new MyTasksModule();
                        await myTasksModuleInstance.init();
                    }
                } else {
                    window.location.href = 'index.html';
                }
            });
            // Akordiyon menü scripti
        });
    </script>
</body>
</html>